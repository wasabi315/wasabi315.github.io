---
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";
import { getRelativeLocaleUrl } from "astro:i18n";

type Props = {
  work: CollectionEntry<"works">;
};

const { work } = Astro.props;
const [_lang, ...id] = work.id.split("/");
const url = getRelativeLocaleUrl(Astro.currentLocale!, `works/${id.join("/")}`);
---

<a href={url}>
  <article>
    <Image class="thumbnail" src={work.data.thumbnail} alt={work.data.title} />
    <h2>{work.data.title}</h2>
    <p>{work.data.description}</p>
  </article>
</a>

<style lang="scss">
  a {
    color: inherit;
    text-decoration: none;
    &:hover,
    &:focus {
      box-shadow: var(--box-shadow);
    }
  }

  .thumbnail {
    display: block;
    object-fit: cover;
    aspect-ratio: 2 / 1;
    max-width: 100%;
    max-height: 100%;
    height: auto;
  }

  h2 {
    margin-top: var(--spacing-xxs);
    font-size: 1.25rem;
  }

  p {
    font-size: 0.875rem;
    color: var(--fg2);
  }

  @media screen and (min-width: 576px) {
    .thumbnail {
      aspect-ratio: 4 / 3;
    }
  }
</style>
